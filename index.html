
  <!DOCTYPE html>
  <html>
    <head>
      <script async defer src="https://buttons.github.io/buttons.js"></script>
      <!--Import Google Icon Font-->
      <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css"  media="screen,projection"/>
      <!--Import jQuery before materialize.js-->
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
      <script>(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src="//x.instagramfollowbutton.com/follow.js";s.parentNode.insertBefore(g,s);}(document,"script"));</script>
      <script>
        $(document).ready(function() {

            $.get("/setup", function(data, status){
                var d = JSON.parse(data);
                console.log(d);
                document.getElementById("temp").innerHTML = 'Temperature: ' + d['temp'] + ' degrees centigrade';
                document.getElementById("pir").innerHTML = 'PIR Value: ' + d['pir'] + '';
                document.getElementById("lightsensor").innerHTML = 'Light Sensor Value: ' + d['lightsensor'];
                document.getElementById("distance").innerHTML = 'Distance: ' + d['distance'] + ' Cm';
                document.getElementById("line1").innerHTML = 'C  PIR Dis Light';
                document.getElementById("line2").innerHTML = d['temp'] + ' ' + d['pir'] + ' ' + d['distance'] + '  ' + d['lightsensor'];
                document.getElementById("temprgb").innerHTML = d['temprgbStat']
                document.getElementById("pirlight").innerHTML = d['pirLightStat']
                document.getElementById("lightsensorlight").innerHTML = d['lightSensorLightStat']
                document.getElementById("varLight").innerHTML = d['varLightStat']
            });

            $("#ledSwitch").change(function() {
                getValues();
            });

            $("#BuzzSwitch").change(function() {
                BuzzerControl();
            });

            $("#VarLightSwitch").change(function() {
                lightSwitches();
            });

            $("#PIRSwitch").change(function() {
                lightSwitches();
            });

            $("#LSLSwitch").change(function() {
                lightSwitches();
            });

            $("#lcdtextbutton").click(function() {
                getText();
            });

            $("#val2screen").click(function() {
                val2screen();
            });

            $("#doorbell").click(function() {
                ringbuzzer();
            });

            $(".button-collapse").sideNav();
            $(".dropdown-button").dropdown();

        });

        function getText() {
            var text1 = $('#texttodisplay1').val();
            console.log('text1 = ' + text1);
            var text2 = $('#texttodisplay2').val();
            console.log('text2 = ' + text2);
            var l1 = document.getElementById("line1")
            l1.innerHTML = [text1];
            var l2 = document.getElementById("line2")
            l2.innerHTML = [text2];

            $.ajax({
                url: '/text',
                type: 'POST',
                data: { texttodisplay1:text1, texttodisplay2:text2}
            });
        }

        function ringbuzzer() {
            $.ajax({
                url: '/ring',
                type: 'POST',
            });
        }

        function val2screen() {
            location.reload();
        }

        function reloadpage() {
            location.reload();
        }

        function lightSwitches() {
            var VLB = $('#VarLightBrightness').val();
            console.log('VLB = ' + VLB);
            var isChecked = $("#VarLightSwitch").is(":checked") ? 1:0;
            console.log('isChecked = ' + isChecked);
            var VLS = 'isChecked';
            var isChecked = $("#PIRSwitch").is(":checked") ? 1:0;
            console.log('isChecked = ' + isChecked);
            var PIRS = 'isChecked';
            var isChecked = $("#LSLSwitch").is(":checked") ? 1:0;
            console.log('isChecked = ' + isChecked);
            var LSLS = 'isChecked';

            $.ajax({
                url: '/ledcontrol',
                type: 'POST',
                data: { VLB:VLB, VLS:isChecked, PIRS:isChecked, LSLS:isChecked}
            });
        }

        function getValues() {
            var rValue = $('#rSlider').val();
            console.log('rValue = ' + rValue);
            var gValue = $('#gSlider').val();
            console.log('gValue = ' + gValue);
            var bValue = $('#bSlider').val();
            console.log('bValue = ' + bValue);
            var isChecked = $("#ledSwitch").is(":checked") ? 1:0;
            console.log('isChecked = ' + isChecked);

            $.ajax({
                url: '/led',
                type: 'POST',
                data: { rValue:rValue, gValue:gValue, bValue:bValue, buttonState:isChecked}
            });
        }

        function BuzzerControl() {
            var isChecked = $("#BuzzSwitch").is(":checked") ? 1:0;
            console.log('isChecked = ' + isChecked);

            $.ajax({
                url: '/buzz',
                type: 'POST',
                data: { buttonState:isChecked}
            });
        }

    </script>


      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>

    <body>
      <a id="top"></a>
      <ul id="navdropdown" class="dropdown-content">
          <li><a href="#sensorcard">Sensors</a></li>
          <li><a href="#ledcard">LED Controls</a></li>
          <li><a href="#buzzcard">Buzzer Controls</a></li>
          <li><a href="#lcdcard">LCD Screen</a></li>
          <li><a href="#ledread">LED Readings</a></li>
      </ul>
        <nav>
          <div class="nav-wrapper red lighten-1">
            <a href="index.html" class="brand-logo">Home Automation Controller</a>
            <a href="index.html" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">
              <li><a class="dropdown-button" href="#!" data-activates="navdropdown">Sensor Control<i class="material-icons right">arrow_drop_down</i></a></li>
              <li><a href="#bottom">Go to the bottom</a></li>
            </ul>
            <ul class="side-nav" id="mobile-demo">
              <li><a href="#ledcard">LED Controls</a></li>
              <li><a href="#buzzcard">Buzzer Controls</a></li>
              <li><a href="#sensorcard">Sensors</a></li>
              <li><a href="#lcdcard">LCD Screen</a></li>
              <li><a href="#ledread">LED Readings</a></li>
              <li><a href="#bottom">Go to the bottom</a></li>
            </ul>
          </div>
        </nav>

        <form>
          <div class="row">
            <div class="col s12 m4" id="sensorcard">
              <div class="card">
                <div class="card-content">
                  <span class="card-title">Sensors</span>
                </div>
                <div class="card-action">
                  <div class="row">
                    <p id="temp" name="temp"></p>
                  </div>
                  <div class="row">
                    <p id="pir" name="pir"></p>
                  </div>
                  <div class="row">
                    <p id="lightsensor" name="lightsensor"></p>
                  </div>
                  <div class="row">
                    <p id="distance" name="distance"></p>
                  </div>
                  <div class="row">
                    <button class="btn waves-effect waves-light" onclick="reloadpage();" type="submit" id="reloadpage" name="reloadpage">Refresh Sensors<i class="material-icons right">send</i>
                  </button>
                  </div>
                  <div>
                    <button class="btn waves-effect waves-light" onclick="val2screen();" type="submit" id="val2screen" name="val2screen">Print Values to LCD<i class="material-icons right">send</i>
                  </button>
                  </div>
                </div>
                </div>
              </div>

            <div class="col s12 m4" id="ledcard">
              <div class="card">
                <div class="card-content">
                  <span class="card-title">RGB LED Controls</span>
                  <p>Use this form to control the RGB LED Light Bulb</p>
                </div>
                <div class="card-action">
                  <div class="row">
                    <div class="switch">
                      <h>RGB LED Light</h>
                      <label>
                        Off
                        <input type="checkbox" name="ledSwitch" id="ledSwitch" />
                        <span class="lever"></span>
                        On
                      </label>
                    </div>
                  </div>
                  <div class="row">
                    <h>Red</h>
                    <p class="range-field">
                      <input type="range" id="rSlider" name="rSlider" min="47" max="255" value="180" onchange="getValues()" />
                    </p>
                  </div>
                  <div class="row">
                    <h>Green</h>
                    <p class="range-field">
                      <input type="range" id="gSlider" name="gSlider" min="47" max="255" value="130" onchange="getValues()" />
                    </p>
                  </div>
                    <div class="row">
                    <h>Blue</h>
                    <p class="range-field">
                      <input type="range" id="bSlider" name="bSlider" min="47" max="255" value="47" onchange="getValues()" />
                    </p>
                  </div>
                </div>

              </div>
            </div>

            <div class="col s12 m4" id="lcdcard">
                <div class="card">
                  <div class="card-content">
                    <span class="card-title">LCD Screen Text</span>
                  </div>
                  <div class="card-action">
                    <div class="row">
                    </div>
                    <div class="row">
                      <input placeholder="Enter text to display on Line 1" id="texttodisplay1" type="text" class="validate">
                    </div>
                    <div class="row">
                      <input placeholder="Enter text to display on Line 2" id="texttodisplay2" type="text" class="validate">
                      <label for="texttodisplay2">Text to display on the LCD Screen</label>
                    </div>
                    <div class="row" onsubmit="return false;" onclick="return false;">
                      <button class="btn waves-effect waves-light" id="lcdtextbutton" name="lcdtextbutton">Submit Text<i class="material-icons right" onsubmit="return false;" onclick="return false;">send</i>
                      </button>
                    </div>
                    <div class="row">
                          <p>LCD Line 1:</p>
                      </div>
                      <div class="row" style="background-color:#90CAF9; color:white">
                          <p style="font-size: 30px; font-family: OCR-A, monospace" id="line1" name="line1"></p>
                      </div>
                      <div class="row">
                          <p>LCD Line 2:</p>
                      </div>
                      <div class="row" style="background-color:#90CAF9; color:white">
                          <p style="font-size: 30px; font-family: OCR-A, monospace" id="line2" name="line2"></p>
                      </div>
                  </div>
                </div>
              </div>

            <div class="col s12 m4" id="buzzcard">
              <div class="card">
                <div class="card-content">
                  <span class="card-title">Buzzer Controls</span>
                  <p>Use this form to control the Buzzer on the Home Automation System</p>
                </div>
                <div class="card-action">
                  <div class="row">
                    <div class="switch">
                      <h>Buzzer</h>
                      <label>
                        Off
                        <input type="checkbox" name="BuzzSwitch" id="BuzzSwitch" />
                        <span class="lever"></span>
                        On
                      </label>
                    </div>
                  </div>
                  <div class="row">
                    <button class="btn waves-effect waves-light" onsubmit="return false;" onclick="return false;" type="submit" id="doorbell" name="doorbell">Ring Buzzer<i class="material-icons right">send</i>
                  </button>
                  </div>
                </div>

              </div>
            </div>

            <div class="col s12 m4" id="ledread">
              <div class="card">
                <div class="card-content">
                  <span class="card-title">LED Readings</span>
                </div>
                <div class="card-action">
                  <div class="row">
                    <p id="temprgb" name="temprgb"></p>
                  </div>
                  <div class="row">
                    <p id="pirlight" name="pirlight"></p>
                  </div>
                  <div class="row">
                    <p id="lightsensorlight" name="lightsensorlight"></p>
                  </div>
                  <div class="row">
                    <p id="varLight" name="varLight"></p>
                  </div>
                </div>
                </div>
              </div>

            <div class="col s12 m4" id="ledcontrolcard">
              <div class="card">
                <div class="card-content">
                  <span class="card-title">LED Controls</span>
                  <p>Use this form to control the single colour LED's on the Home Automation System</p>
                </div>
                <div class="card-action">
                  <div class="row">
                    <div class="switch">
                      <h>Variable Light</h>
                      <label>
                        Off
                        <input type="checkbox" name="VarLightSwitch" id="VarLightSwitch" onchange="lightSwitches()"/>
                        <span class="lever"></span>
                        On
                      </label>
                    </div>
                  </div>
                  <div class="row">
                    <h>Brightness</h>
                    <p class="range-field">
                      <input type="range" id="VarLightBrightness" name="VarLightBrightness" min="1" max="100" value="80" onchange="lightSwitches()" />
                    </p>
                  </div>
                  <div class="card-action"></div>
                  <div class="row">
                    <div class="switch">
                      <h>PIR Light</h>
                      <label>
                        Off
                        <input type="checkbox" name="PIRSwitch" id="PIRSwitch" onchange="lightSwitches()"/>
                        <span class="lever"></span>
                        On
                      </label>
                    </div>
                  </div>
                  <div class="row">
                    <div class="switch">
                      <h>Light Sensor Light</h>
                      <label>
                        Off
                        <input type="checkbox" name="LSLSwitch" id="LSLSwitch" onchange="lightSwitches()"/>
                        <span class="lever"></span>
                        On
                      </label>
                    </div>
                  </div>
                </div>
                </div>
              </div>
          </div>
        </form>

        <footer class="page-footer red lighten-1">
          <a id="bottom"></a>
          <div class="container">
            <div class="row">
              <div class="col s12 m12">
                <h5 class="white-text">Raspberry Pi Home Automation System</h5>
                <p class="grey-text text-lighten-4">By Reece Small</p>
              </div>
              <div class="col m3 s12">
                <h5 class="white-text">Resources</h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="http://bottlepy.org/docs/dev/index.html">Python Bottle</a></li>
                  <li><a class="grey-text text-lighten-3" href="https://www.python.org/downloads/release/python-351/">Python 3</a></li>
                  <li><a class="grey-text text-lighten-3" href="http://materializecss.com/">CSS used - Materialize CSS</a></li>
                  <li><a class="grey-text text-lighten-3" href="https://docs.python.org/3/library/tk.html">TKinter for Python 3</a></li>
                  <li><a class="grey-text text-lighten-3" href="https://www.google.co.uk/">Google</a></li>
                </ul>
              </div>
              <div class="col m3 s12">
                <h5 class="white-text">Links</h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="https://github.com/ItsReeceSmall">Reece Small's GitHub</a></li>
                  <li><a class="grey-text text-lighten-3" href="https://github.com/ItsReeceSmall/PiHomeAuto">This Projects Repository on GitHub</a></li>
                  <li><a class="github-button" href="https://github.com/ItsReeceSmall/PiHomeAuto" data-icon="octicon-star" data-style="mega" data-count-href="/ItsReeceSmall/PiHomeAuto/stargazers" data-count-api="/repos/ItsReeceSmall/PiHomeAuto#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star ItsReeceSmall/PiHomeAuto on GitHub">Star</a></li>
                </ul>
              </div>
              <div class="col m3 s12">
                <h5 class="white-text">Follow Me</h5>
                <ul>
                  <li><a href="https://twitter.com/ItsReeceSmall" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true">Follow @ItsReeceSmall</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></li>
                  <li><a class="github-button" href="https://github.com/ItsReeceSmall" data-style="mega" data-count-href="/ItsReeceSmall/followers" data-count-api="/users/ItsReeceSmall#followers" data-count-aria-label="# followers on GitHub" aria-label="Follow @ItsReeceSmall on GitHub">Follow @ItsReeceSmall</a></li>
                  <li><span class="ig-follow" data-id="142449076" data-handle="itsreecesmall" data-count="true" data-size="large" data-username="true"></span></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">Copyright © 2016 Reece Small
            <a class="grey-text text-lighten-4 right" href="#top">Go to the top</a>
            </div>
          </div>
        </footer>

    </body>
  </html>
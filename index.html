
  <!DOCTYPE html>
  <html>
    <head>
      <!--Import Google Icon Font-->
      <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css"  media="screen,projection"/>
      <!--Import jQuery before materialize.js-->
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
      <script>
        $(document).ready(function() {

            $.get("/setup", function(data, status){
                var d = JSON.parse(data);
                console.log(d);
                document.getElementById("temp").innerHTML = 'Temperature: ' + d['temp'] + ' degrees centigrade';
                document.getElementById("pir").innerHTML = 'PIR Value: ' + d['pir'] + '';
                document.getElementById("lightsensor").innerHTML = 'Light Sensor Value: ' + d['lightsensor'];
                document.getElementById("distance").innerHTML = 'Distance: ' + d['distance'] + ' Cm';
            });

            $("#ledSwitch").change(function() {
                getValues();
            });

            $("#lcdtextbutton").click(function() {
                getText();
            });

        });

        function getText() {
            var text1 = $('#texttodisplay1').val();
            console.log('text1 = ' + text1);
            var text2 = $('#texttodisplay2').val();
            console.log('text2 = ' + text2);
            var l1 = document.getElementById("line1")
            l1.innerHTML = [text1];
            var l2 = document.getElementById("line2")
            l2.innerHTML = [text2];

            $.ajax({
                url: '/text',
                type: 'POST',
                data: { texttodisplay1:text1, texttodisplay2:text2}
            });
        }

        function reloadpage() {
            location.reload();
        }

        function getValues() {
            var rValue = $('#rSlider').val();
            console.log('rValue = ' + rValue);
            var gValue = $('#gSlider').val();
            console.log('gValue = ' + gValue);
            var bValue = $('#bSlider').val();
            console.log('bValue = ' + bValue);
            var isChecked = $("#ledSwitch").is(":checked") ? 1:0;
            console.log('isChecked = ' + isChecked);

            $.ajax({
                url: '/led',
                type: 'POST',
                data: { rValue:rValue, gValue:gValue, bValue:bValue, buttonState:isChecked}
            });
        }

    </script>


      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>

    <body>
        <nav>
          <div class="nav-wrapper blue lighten-3">
            <a href="#" class="brand-logo right">Raspberry Pi Home Automation System - By Reece Small</a>
            <ul id="nav-mobile" class="left hide-on-med-and-down">
              
            </ul>
          </div>
        </nav>

        <form>
          <div class="row">
            <div class="col s12 m6">
              <div class="card">
                <div class="card-content">
                  <span class="card-title">LED Controls</span>
                  <p>Use this form to control the LEDs on the Sense Hat</p>
                </div>
                <div class="card-action">
                  <div class="row">
                    <div class="switch">
                      <h>LEDs</h>
                      <label>
                        off
                        <input type="checkbox" name="ledSwitch" id="ledSwitch" />
                        <span class="lever"></span>
                        On
                      </label>
                    </div>
                  </div>
                  <div class="row">
                    <h>Red</h>
                    <p class="range-field">
                      <input type="range" id="rSlider" name="rSlider" min="47" max="255" value="180" onchange="getValues()" />
                    </p>
                  </div>
                  <div class="row">
                    <h>Green</h>
                    <p class="range-field">
                      <input type="range" id="gSlider" name="gSlider" min="47" max="255" value="130" onchange="getValues()" />
                    </p>
                  </div>
                    <div class="row">
                    <h>Blue</h>
                    <p class="range-field">
                      <input type="range" id="bSlider" name="bSlider" min="47" max="255" value="47" onchange="getValues()" />
                    </p>
                  </div>
                </div>

              </div>
            </div>

            <div class="col s12 m6">
              <div class="card">
                <div class="card-content">
                  <span class="card-title">Sensors</span>
                </div>
                <div class="card-action">
                  <div class="row">
                    <p id="temp" name="temp"></p>
                  </div>
                  <div class="row">
                    <p id="pir" name="pir"></p>
                  </div>
                  <div class="row">
                    <p id="lightsensor" name="lightsensor"></p>
                  </div>
                  <div class="row">
                    <p id="distance" name="distance"></p>
                  </div>
                  <div class="row">
                    <button class="btn waves-effect waves-light" onclick="reloadpage();" type="submit" id="reloadpage" name="reloadpage">Refresh Sensors<i class="material-icons right">send</i>
                  </button>
                  </div>
                </div>
                </div>
              </div>

            <div class="col s12 m6">
                <div class="card">
                  <div class="card-content">
                    <span class="card-title">LCD Screen Text</span>
                  </div>
                  <div class="card-action">
                    <div class="row">
                    </div>
                    <div class="row">
                      <input placeholder="Enter text to display on Line 1" id="texttodisplay1" type="text" class="validate">
                    </div>
                    <div class="row">
                      <input placeholder="Enter text to display on Line 2" id="texttodisplay2" type="text" class="validate">
                      <label for="texttodisplay2">Text to display on the LCD Screen</label>
                    </div>
                    <div class="row">
                      <button class="btn waves-effect waves-light" id="lcdtextbutton" name="lcdtextbutton">Submit Text<i class="material-icons right" onclick="return false;">send</i>
                      </button>
                    </div>
                </div>
            </div>
          </div>

            <div class="col s12 m6">
                <div class="card">
                  <div class="card-content">
                    <span class="card-title">LCD Screen Status</span>
                  </div>
                  <div class="card-action">
                      <div class="column">
                          <p>LCD Line 1:</p>
                      </div>
                      <div class="column" style="background-color:#90CAF9; color:white">
                          <p style="padding: 1%; font-size: 30px; font-family: OCR-A, monospace" id="line1" name="line1"></p>
                      </div>
                      <div class="column">
                          <p>LCD Line 2:</p>
                      </div>
                      <div class="column" style="background-color:#90CAF9; color:white">
                          <p style="padding: 1%; font-size: 30px; font-family: OCR-A, monospace" id="line2" name="line2"></p>
                      </div>
                  </div>
                </div>
            </div>
          </div>
        </form>


    </body>
  </html>